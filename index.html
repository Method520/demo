<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>列表</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <meta content="telephone=no" name="format-detection" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" type="text/css" href="css/common/common.css" />
  <link rel="stylesheet" href="./css/mine.css">
  <style>
    html,
    body {
      overflow: hidden;
    }
  </style>
</head>

<body>
  <div class="sidebar" id="sidebar">
    <ul>
      <li>
        <a href="#">艺术鉴赏</a>
      </li>
      <li>
        <a href="#">珠宝腕表</a>
      </li>
      <li>
        <a href="#">水晶瓷器</a>
      </li>
      <li>
        <a href="#">家具生活</a>
      </li>
      <li>
        <a href="#">旅行发现</a>
      </li>
      <li>
        <a href="#">体育赛事</a>
      </li>
      <li>
        <a href="#">私人玩具</a>
      </li>
      <li>
        <a href="#">美酒美食</a>
      </li>
      <li>
        <a href="#">手机数码</a>
      </li>
      <li class="sidebar-close"></li>
    </ul>
  </div>
  <div class="mainbody offcanvas">
    <div class="searchbar">
      <input type="text">
    </div>
    <div id="fullpage" class="fullpage">
      <div class="section">
        <div class="section-main" id="1">
          <div class="section-head">
            <h5>清 • 雍正</h5>
            <h3>绿釉梅瓶</h3>
          </div>
          <div class="section-content">
            <div class="content-img">
              <img src="./image/bottle.png" alt="">
            </div>
            <div class="content-action" onclick="handleCollect(this)">
              <i class="heart"></i>
              <span>收藏</span>
            </div>
          </div>
          <dl class="section-footer">
            <dt>￥500,000</dt>
            <dd>孔雀绿釉亦称吉翠釉、翡翠釉，是典型的低温釉，以铜为着色剂，最早的实物见于宋代，以后的金元明清都有烧制，由于烧成温度低，胎釉结合不好，故见到的孔雀绿器物多有剥釉现象。</dd>
          </dl>
        </div>
      </div>
      <div class="section">
        <div class="section-main" id="2">
          <div class="section-head">
            <h5>东汉</h5>
            <h3>马踏飞燕</h3>
          </div>
          <div class="section-content">
            <div class="content-img">
              <img src="./image/horse.png" alt="">
            </div>
            <div class="content-action active" onclick="handleCollect(this)">
              <i class="heart"></i>
              <span>已收藏</span>
            </div>
          </div>
          <dl class="section-footer">
            <dt>￥500,000</dt>
            <dd>马踏飞燕又名马超龙雀、铜奔马、马袭乌鸦、鹰（鹞）掠马、马踏飞隼、凌云奔马[1] 等，为东汉青铜器，1969年出土于甘肃省武威市雷台汉墓。东汉时期镇守张掖的军事长官张江及其妻合葬墓中出土，现藏甘肃省博物馆。</dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="actionbar">
      <div class="menu-bar"></div>
      <div class="tip-bar"></div>
      <div class="scan-bar"></div>
    </div>
  </div>
  <script src="./js/fullpage.min.js"></script>
  <script>

    var direction = null;
    var halfClientWidth = document.documentElement.clientWidth / 2;
    new AlloyTouch({
      touch: '#fullpage',
      vertical: false,
      touchStart: function (evt) {
        evt.stopPropagation();
        direction = evt.touches[0].clientX >= halfClientWidth ? 'right' : 'left';
      },
      bindSelf: true,
      touchEnd: function (evt) {
        evt.stopPropagation();
        var currentSection = evt.path.filter(function (item) {
          return item.className && item.className === 'section-main';
        })[0];
        if (direction === 'right' && evt.changedTouches[0].clientX <= halfClientWidth) {
          window.location.href = './goodDetail' + currentSection.id + '.html'
        }
        if (direction === 'left' && evt.changedTouches[0].clientX >= halfClientWidth) {
          document.querySelector('.sidebar').className = 'sidebar offcanvas-left';
          document.querySelector('.mainbody').className = 'mainbody offcanvas-right';
        }
      }
    });
    new AlloyTouch({
      touch: '#sidebar',
      vertical: false,
      touchStart: function (evt) {
        evt.stopPropagation();
        direction = evt.touches[0].clientX >= halfClientWidth ? 'right' : 'left';
      },
      bindSelf: true,
      touchEnd: function (evt) {
        evt.stopPropagation();
        if (direction === 'right' && evt.changedTouches[0].clientX <= halfClientWidth) {
          document.querySelector('.sidebar').className = 'sidebar';
          document.querySelector('.mainbody').className = 'mainbody';
        }
      }
    });

    document.querySelector('.menu-bar').addEventListener('click', function(e) {
      document.querySelector('.sidebar').className = 'sidebar offcanvas-left';
      document.querySelector('.mainbody').className = 'mainbody offcanvas-right';
    }, false);
    document.querySelector('.sidebar-close').addEventListener('click', function(e) {
      document.querySelector('.sidebar').className = 'sidebar';
      document.querySelector('.mainbody').className = 'mainbody';
    }, false);
    document.querySelector('.scan-bar').addEventListener('click', function(e) {
      window.location.href = './scanner.html';
    }, false);

    var fp = new AlloyTouch.FullPage('#fullpage', {
      animationEnd: function () {
      },
      leavePage: function (index) {
      },
      beginToPage: function (index) {
      }
    });

    function handleCollect(e) {
      var active = e.className.indexOf('active') !== -1;
      if (active) {
        e.className = e.className.replace('active', '');
        e.querySelector('span').innerText = '收藏';
      } else {
        e.className = e.className += ' active';
        e.querySelector('span').innerText = '已收藏';
      }
    }

  </script>

</body>

</html>